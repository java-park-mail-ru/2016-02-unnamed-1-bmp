# Получаемые сообщения от сервера

## Начало игры

```
    {
        "action":"start",
        "body": {
            "myName": "player555"
            "enemyName": "player777"
        }
    }
```
## Ход соперника

```"action":"wait"``` - получает тот, кто только что стрелял
```"status":["killed", "picked", "missed"]```говорит о состоянии тех кораблей, в которые он стрелял (корабли противника)

```"coordinates": [[1,1],[1,2],[1,3],[1,4]]``` 
для статуса ```"killed"``` перечисляются все координаты убитого корабля
для статусов ```"picked" и "missed"``` указаны только координаты последней стрельбы

Примеры:
```
        "body": {
            "status":"picked";//попал
            "coordinates": [1,1]
        }
        
        "body": {
            "status":"missed";//промазал
            "coordinates": [1,1]
        }
        
        "body": {
            "status":"killed",
            "coordinates": [[1,1],[1,2],[1,3],[1,4]]
        }
```

## Ход текущего игрока
```"action":"shoot"``` - получает тот, кто должен сейчас стрелять
В body находится информациях о кораблях данного игрока

```
    {
        "action":"shoot",
        "body": {
              "status":"picked",
              "coordinates": [1,3]
        }
    }
```
## Конец игры и вывод победителя

```
    {
        "action":"gameOver",
        "body": {
            "win":True //False
        }
    }
```
## Конец игры - соперник вышел не закончив партию

```
    {
        "action":"enemyLeft"
    }
```

# Отправляемые сообщения
Сокеты доступны по "/gameplay"

## После расстановки корабле отсылается JSON с координатами всех расставленных кораблей

```
ws = new WebSocket("ws://localhost:8080/gameplay");
var message = "{
    "action":"set_ships",
    "body":{
        "four-decked":[[1,1],[1,2],[1,3],[1,4]],
        "three-decked":[[[1,1],[1,2],[1,3]],[[1,1],[1,2],[1,3]]],
        "two-decked":[[[1,1],[1,2]],[[1,1],[1,2]],[[1,1],[1,2]]],
        "one-decked":[[1,1],[1,1],[1,1],[1,1]]
    }
}"
```
## Подстрелить соперника

```
 var message = " {
    "action":"shoot",
    "body":{
        "coordinates":[1,1]
    }
}"
```


# Scoreboard
Доступен по "/api/scoreboard"
Выводит 10 лучших игроков в следующем формате

```
{
    "Вася":10,
    "Маша":9,
    "Дуся":8,
    "Петя":7,
    "Катя":6
}
    
```